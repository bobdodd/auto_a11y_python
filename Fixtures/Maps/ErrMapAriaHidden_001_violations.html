<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErrMapAriaHidden - Violations</title>
    <script type="application/json" id="test-metadata">
{
    "id": "ErrMapAriaHidden_001_violations",
    "issueId": "ErrMapAriaHidden",
    "expectedViolationCount": 3,
    "expectedPassCount": 0,
    "description": "Interactive maps with aria-hidden='true' hiding focusable controls (silent focus trap)",
    "wcag": "1.3.1",
    "impact": "High"
}
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
    <h1>Store Locations</h1>

    <main>
        <section>
            <h2>Downtown Location</h2>
            <p>Visit our downtown store:</p>

            <!-- Violation 1: Google Maps iframe with aria-hidden and interactive controls -->
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.123456789!2d-73.987654!3d40.748567"
                    width="600"
                    height="450"
                    style="border:0;"
                    allowfullscreen=""
                    loading="lazy"
                    title="Map showing downtown store location"
                    aria-hidden="true"
                    data-expected-violation="true"
                    data-violation-id="ErrMapAriaHidden"
                    data-violation-reason="Google Maps iframe has aria-hidden='true' which creates a silent focus trap. The map contains interactive controls (zoom buttons, fullscreen button) that are focusable but hidden from screen readers. Users can tab to these controls but receive no feedback. Violates WCAG 1.3.1 Info and Relationships."></iframe>
        </section>

        <section>
            <h2>Suburban Location</h2>
            <p>Find our suburban store:</p>

            <!-- Violation 2: Div-based Leaflet map with aria-hidden -->
            <div id="leaflet-map"
                 class="map-container"
                 aria-hidden="true"
                 aria-label="Interactive map showing suburban store location"
                 data-expected-violation="true"
                 data-violation-id="ErrMapAriaHidden"
                 data-violation-reason="Leaflet map container has aria-hidden='true' hiding interactive zoom controls, markers, and popups. Map controls remain keyboard-focusable but screen reader users receive no context. Creates silent focus trap. Fails WCAG 1.3.1."
                 style="width: 600px; height: 450px; background: #eee;">
                <!-- Simulated Leaflet controls -->
                <div class="leaflet-control-zoom">
                    <button class="leaflet-control-zoom-in" title="Zoom in">+</button>
                    <button class="leaflet-control-zoom-out" title="Zoom out">-</button>
                </div>
            </div>
        </section>

        <section>
            <h2>Airport Location</h2>
            <p>We're near the airport:</p>

            <!-- Violation 3: Mapbox div with aria-hidden and buttons -->
            <div id="mapbox-map"
                 class="mapbox-gl-map"
                 aria-hidden="true"
                 data-expected-violation="true"
                 data-violation-id="ErrMapAriaHidden"
                 data-violation-reason="Mapbox GL map has aria-hidden='true' but contains focusable navigation controls. Users can tab into the map and reach buttons but screen reader provides no information. Silent focus trap prevents users from understanding where focus is or what controls do. Violates WCAG 1.3.1."
                 style="width: 600px; height: 450px; background: #ddd;">
                <div class="mapboxgl-ctrl-group">
                    <button class="mapboxgl-ctrl-zoom-in" type="button" aria-label="Zoom in">
                        <span aria-hidden="true">+</span>
                    </button>
                    <button class="mapboxgl-ctrl-zoom-out" type="button" aria-label="Zoom out">
                        <span aria-hidden="true">âˆ’</span>
                    </button>
                    <button class="mapboxgl-ctrl-compass" type="button" aria-label="Reset bearing to north">
                        <span aria-hidden="true"></span>
                    </button>
                </div>
            </div>
            <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Store Locations. All rights reserved.</p>
    </footer>
</body>
</html>
