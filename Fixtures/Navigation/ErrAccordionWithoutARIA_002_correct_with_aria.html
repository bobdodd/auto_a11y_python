<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI_ErrAccordionWithoutARIA - Correct Usage</title>
    <script type="application/json" id="test-metadata">
{
    "id": "ErrAccordionWithoutARIA_002_correct_with_aria",
    "issueId": "ErrAccordionWithoutARIA",
    "expectedViolationCount": 0,
    "expectedPassCount": 3,
    "description": "Accordion elements with proper ARIA markup and keyboard support",
    "wcag": "2.1.1, 4.1.2, 1.3.1",
    "impact": "High"
}
    </script>
</head>
<body>
    <h1>FAQ Page - Correct Usage</h1>

    <main>
        <h2>Frequently Asked Questions</h2>

        <!-- Accordion with proper ARIA - CORRECT -->
        <div class="accordion"
             data-expected-pass="true"
             data-pass-reason="Accordion header uses button element with aria-expanded and aria-controls, making state and relationship clear to screen readers">
            <h3>
                <button id="accordion1"
                        aria-expanded="false"
                        aria-controls="panel1"
                        onclick="toggleAccessibleAccordion('accordion1', 'panel1')">
                    What is your return policy?
                </button>
            </h3>
            <div id="panel1" role="region" aria-labelledby="accordion1" hidden>
                <p>We accept returns within 30 days of purchase with original receipt.</p>
            </div>
        </div>

        <!-- Accordion with keyboard support - CORRECT -->
        <div class="accordion"
             data-expected-pass="true"
             data-pass-reason="Button element with aria-expanded state updates dynamically. Keyboard accessible and announces expanded/collapsed state to assistive technologies">
            <h3>
                <button id="accordion2"
                        aria-expanded="false"
                        aria-controls="panel2"
                        onclick="toggleAccessibleAccordion('accordion2', 'panel2')">
                    How long does shipping take?
                </button>
            </h3>
            <div id="panel2" role="region" aria-labelledby="accordion2" hidden>
                <p>Standard shipping takes 5-7 business days.</p>
            </div>
        </div>

        <!-- Accordion with full ARIA pattern - CORRECT -->
        <div class="accordion"
             data-expected-pass="true"
             data-pass-reason="Complete ARIA accordion pattern with button role, aria-expanded state management, aria-controls linking header to panel, and hidden attribute for collapsed state">
            <h3>
                <button id="accordion3"
                        aria-expanded="false"
                        aria-controls="panel3"
                        onclick="toggleAccessibleAccordion('accordion3', 'panel3')">
                    Do you offer international shipping?
                </button>
            </h3>
            <div id="panel3" role="region" aria-labelledby="accordion3" hidden>
                <p>Yes, we ship to over 50 countries worldwide.</p>
            </div>
        </div>
    </main>

    <script>
        function toggleAccessibleAccordion(buttonId, panelId) {
            const button = document.getElementById(buttonId);
            const panel = document.getElementById(panelId);
            const isExpanded = button.getAttribute('aria-expanded') === 'true';

            button.setAttribute('aria-expanded', !isExpanded);
            panel.hidden = isExpanded;
        }
    </script>
</body>
</html>
