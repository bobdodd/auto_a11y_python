<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI_ErrModalWithoutARIA - Violations</title>
    <script type="application/json" id="test-metadata">
{
    "id": "AI_ErrModalWithoutARIA_001_violations_basic",
    "issueId": "AI_ErrModalWithoutARIA",
    "expectedViolationCount": 2,
    "expectedPassCount": 0,
    "description": "Modal dialogs lacking proper ARIA attributes and focus management",
    "wcag": "2.1.1, 4.1.2, 2.4.3",
    "impact": "High"
}
    </script>
    <style>
        .modal { display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal.show { display: block; }
        .modal-content { background: white; margin: 10% auto; padding: 20px; width: 50%; }
    </style>
</head>
<body>
    <h1>Account Settings</h1>

    <main>
        <button onclick="openModal('delete')">Delete Account</button>
        <button onclick="openModal('confirm')">Save Changes</button>
    </main>

    <!-- Modal without ARIA attributes -->
    <div id="delete-modal" class="modal"
         data-expected-violation="true"
         data-violation-id="AI_ErrModalWithoutARIA"
         data-violation-reason="Modal lacks role='dialog', aria-modal='true', aria-labelledby, and focus management. Screen readers cannot identify this as a modal dialog or understand its purpose">
        <div class="modal-content">
            <h2>Delete Account</h2>
            <p>Are you sure you want to delete your account? This action cannot be undone.</p>
            <button onclick="closeModal('delete')">Cancel</button>
            <button onclick="deleteAccount()">Delete</button>
        </div>
    </div>

    <!-- Modal without proper focus trap -->
    <div id="confirm-modal" class="modal"
         data-expected-violation="true"
         data-violation-id="AI_ErrModalWithoutARIA"
         data-violation-reason="Modal missing role='dialog', aria-modal='true', and focus trap. Keyboard users can tab outside modal, and screen readers don't announce modal context">
        <div class="modal-content">
            <h2>Confirm Changes</h2>
            <p>Save your changes before leaving this page?</p>
            <button onclick="closeModal('confirm')">Don't Save</button>
            <button onclick="saveChanges()">Save</button>
        </div>
    </div>

    <script>
        function openModal(id) {
            document.getElementById(id + '-modal').classList.add('show');
        }

        function closeModal(id) {
            document.getElementById(id + '-modal').classList.remove('show');
        }

        function deleteAccount() {
            alert('Account deleted');
            closeModal('delete');
        }

        function saveChanges() {
            alert('Changes saved');
            closeModal('confirm');
        }
    </script>
</body>
</html>
