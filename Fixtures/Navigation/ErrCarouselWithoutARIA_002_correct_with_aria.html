<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErrCarouselWithoutARIA - Correct Usage</title>
    <script type="application/json" id="test-metadata">
{
    "id": "AI_ErrCarouselWithoutARIA_002_correct_with_aria",
    "issueId": "ErrCarouselWithoutARIA",
    "expectedViolationCount": 0,
    "expectedPassCount": 2,
    "description": "Carousel elements with proper ARIA markup, live regions, and accessible controls",
    "wcag": "2.1.1, 4.1.2, 2.2.2",
    "impact": "High"
}
    </script>
</head>
<body>
    <h1>Product Showcase - Correct Usage</h1>

    <main>
        <!-- Carousel with proper ARIA - CORRECT -->
        <div class="carousel"
             role="region"
             aria-label="Product carousel"
             aria-live="polite"
             data-expected-pass="true"
             data-pass-reason="Carousel uses role='region' with aria-label for identification, aria-live='polite' for slide change announcements, and button elements for accessible controls">
            <div class="carousel-inner">
                <div class="slide" aria-hidden="false">
                    <img src="product1.jpg" alt="Product 1">
                    <p>Amazing Product 1</p>
                </div>
                <div class="slide" aria-hidden="true" style="display:none;">
                    <img src="product2.jpg" alt="Product 2">
                    <p>Fantastic Product 2</p>
                </div>
                <div class="slide" aria-hidden="true" style="display:none;">
                    <img src="product3.jpg" alt="Product 3">
                    <p>Incredible Product 3</p>
                </div>
            </div>
            <button aria-label="Previous slide" onclick="accessibleChangeSlide(-1)">❮</button>
            <button aria-label="Next slide" onclick="accessibleChangeSlide(1)">❯</button>
            <div aria-live="polite" aria-atomic="true" class="sr-only" id="carousel-status">
                Slide 1 of 3
            </div>
        </div>

        <!-- Auto-rotating carousel with pause control - CORRECT -->
        <div class="auto-carousel"
             role="region"
             aria-label="Promotional offers"
             aria-live="off"
             data-expected-pass="true"
             data-pass-reason="Auto-rotating carousel includes pause/play button, keyboard-accessible navigation, aria-live region, and proper ARIA labels for all controls">
            <button id="pauseBtn" aria-label="Pause carousel rotation" onclick="toggleAutoRotate()">
                Pause
            </button>
            <div class="carousel-slides">
                <div class="slide active" role="group" aria-label="Slide 1 of 3">
                    <h3>Summer Sale</h3>
                    <p>50% off all items</p>
                </div>
                <div class="slide" role="group" aria-label="Slide 2 of 3" hidden>
                    <h3>New Arrivals</h3>
                    <p>Check out our latest collection</p>
                </div>
                <div class="slide" role="group" aria-label="Slide 3 of 3" hidden>
                    <h3>Free Shipping</h3>
                    <p>On orders over $50</p>
                </div>
            </div>
            <div class="dots" role="tablist" aria-label="Carousel pagination">
                <button role="tab" aria-selected="true" aria-label="Go to slide 1" onclick="accessibleGoToSlide(0)"></button>
                <button role="tab" aria-selected="false" aria-label="Go to slide 2" onclick="accessibleGoToSlide(1)"></button>
                <button role="tab" aria-selected="false" aria-label="Go to slide 3" onclick="accessibleGoToSlide(2)"></button>
            </div>
        </div>
    </main>

    <script>
        let currentSlide = 0;
        let autoRotateInterval = null;

        function accessibleChangeSlide(direction) {
            const slides = document.querySelectorAll('.carousel .slide');
            slides[currentSlide].setAttribute('aria-hidden', 'true');
            slides[currentSlide].style.display = 'none';
            currentSlide = (currentSlide + direction + slides.length) % slides.length;
            slides[currentSlide].setAttribute('aria-hidden', 'false');
            slides[currentSlide].style.display = 'block';
            document.getElementById('carousel-status').textContent = `Slide ${currentSlide + 1} of ${slides.length}`;
        }

        function accessibleGoToSlide(index) {
            const slides = document.querySelectorAll('.auto-carousel .slide');
            const tabs = document.querySelectorAll('[role="tab"]');

            slides.forEach((s, i) => {
                s.hidden = i !== index;
                s.classList.toggle('active', i === index);
                tabs[i].setAttribute('aria-selected', i === index);
            });
        }

        function toggleAutoRotate() {
            const btn = document.getElementById('pauseBtn');
            if (autoRotateInterval) {
                clearInterval(autoRotateInterval);
                autoRotateInterval = null;
                btn.textContent = 'Play';
                btn.setAttribute('aria-label', 'Play carousel rotation');
            } else {
                autoRotateInterval = setInterval(() => {
                    const next = (currentSlide + 1) % 3;
                    accessibleGoToSlide(next);
                    currentSlide = next;
                }, 5000);
                btn.textContent = 'Pause';
                btn.setAttribute('aria-label', 'Pause carousel rotation');
            }
        }
    </script>
</body>
</html>
