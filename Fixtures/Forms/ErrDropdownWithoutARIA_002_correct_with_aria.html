<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Settings - Accessible Dropdown</title>
    <script type="application/json" id="test-metadata">
{
    "id": "AI_ErrDropdownWithoutARIA_002_correct_with_aria",
    "issueId": "ErrDropdownWithoutARIA",
    "expectedViolationCount": 0,
    "expectedPassCount": 2,
    "description": "Custom dropdown menus with proper ARIA attributes for accessibility",
    "wcag": "2.1.1, 4.1.2, 1.3.1",
    "impact": "High"
}
    </script>
    <style>
        .dropdown { position: relative; display: inline-block; }
        .dropdown-button { padding: 10px; background: #007bff; color: white; border: none; cursor: pointer; }
        .dropdown-menu { display: none; position: absolute; background: white; border: 1px solid #ccc; min-width: 160px; }
        .dropdown-menu.show { display: block; }
        .dropdown-item { padding: 10px; cursor: pointer; }
        .dropdown-item:hover { background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>User Settings</h1>

    <p>Select your preferences from the accessible dropdowns below:</p>

    <div class="dropdown"
         data-expected-pass="true"
         data-pass-reason="Dropdown has proper aria-haspopup, aria-expanded, role='menu', and role='menuitem' attributes">
        <button class="dropdown-button"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="theme-menu"
                onclick="toggleAccessibleMenu(this, 'theme')">
            Theme: Light
        </button>
        <div class="dropdown-menu" id="theme-menu" role="menu">
            <div class="dropdown-item" role="menuitem" tabindex="0">Light</div>
            <div class="dropdown-item" role="menuitem" tabindex="0">Dark</div>
            <div class="dropdown-item" role="menuitem" tabindex="0">Auto</div>
        </div>
    </div>

    <div class="dropdown"
         data-expected-pass="true"
         data-pass-reason="Language dropdown properly declares aria-expanded state and menu structure with roles">
        <button class="dropdown-button"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="language-menu"
                onclick="toggleAccessibleMenu(this, 'language')">
            Language: English
        </button>
        <div class="dropdown-menu" id="language-menu" role="menu">
            <div class="dropdown-item" role="menuitem" tabindex="0">English</div>
            <div class="dropdown-item" role="menuitem" tabindex="0">Español</div>
            <div class="dropdown-item" role="menuitem" tabindex="0">Français</div>
            <div class="dropdown-item" role="menuitem" tabindex="0">Deutsch</div>
        </div>
    </div>

    <script>
        function toggleAccessibleMenu(button, id) {
            const menu = document.getElementById(id + '-menu');
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            button.setAttribute('aria-expanded', !isExpanded);
            menu.classList.toggle('show');
        }
    </script>
</body>
</html>
