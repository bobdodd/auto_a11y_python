<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI_ErrDropdownWithoutARIA - Correct Usage</title>
    <script type="application/json" id="test-metadata">
{
    "id": "AI_ErrDropdownWithoutARIA_002_correct_with_aria",
    "issueId": "AI_ErrDropdownWithoutARIA",
    "expectedViolationCount": 0,
    "expectedPassCount": 2,
    "description": "Custom dropdown menus with proper ARIA attributes",
    "wcag": "4.1.2",
    "impact": "High"
}
    </script>
    <style>
        .dropdown { position: relative; display: inline-block; }
        .dropdown-toggle { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background: white; border: 1px solid #ccc; min-width: 150px; z-index: 1000; }
        .dropdown-menu.active { display: block; }
        .dropdown-item { padding: 10px; display: block; color: black; text-decoration: none; cursor: pointer; }
        .dropdown-item:hover { background: #f0f0f0; }
    </style>
    <script>
        function toggleDropdown(button) {
            const menu = document.getElementById(button.getAttribute('aria-controls'));
            const isExpanded = button.getAttribute('aria-expanded') === 'true';

            button.setAttribute('aria-expanded', !isExpanded);
            menu.classList.toggle('active');
        }
    </script>
</head>
<body>
    <h1>User Menu</h1>

    <main>
        <section data-expected-pass="true"
                 data-pass-reason="Custom dropdown implemented with proper ARIA attributes. Button has aria-haspopup='true' and aria-expanded state. Menu has role='menu' and aria-labelledby. Menu items have role='menuitem'. Screen readers announce dropdown state and menu relationship. Users know menu is collapsed or expanded. Keyboard navigation supported with proper ARIA. Complies with WCAG 4.1.2 Name, Role, Value by implementing complete dropdown ARIA pattern">
            <h2>Account Actions</h2>

            <div class="dropdown">
                <button class="dropdown-toggle"
                        id="account-button"
                        aria-haspopup="true"
                        aria-expanded="false"
                        aria-controls="account-menu"
                        onclick="toggleDropdown(this)">
                    Account
                </button>
                <div class="dropdown-menu"
                     id="account-menu"
                     role="menu"
                     aria-labelledby="account-button">
                    <a class="dropdown-item" role="menuitem" href="/profile">Profile</a>
                    <a class="dropdown-item" role="menuitem" href="/settings">Settings</a>
                    <a class="dropdown-item" role="menuitem" href="/logout">Logout</a>
                </div>
            </div>
        </section>

        <section data-expected-pass="true"
                 data-pass-reason="Dropdown menu with complete ARIA implementation. Toggle button has aria-haspopup='true' and aria-expanded='false'. Menu has role='menu' and relationship via aria-labelledby. Items have role='menuitem'. Screen readers identify dropdown pattern correctly. Users with assistive technology get menu state information. Keyboard users have proper focus management via ARIA. Meets WCAG 4.1.2 Name, Role, Value by fully implementing dropdown ARIA semantics">
            <h2>Language Selection</h2>

            <div class="dropdown">
                <button class="dropdown-toggle"
                        id="language-button"
                        aria-haspopup="true"
                        aria-expanded="false"
                        aria-controls="language-menu"
                        onclick="toggleDropdown(this)">
                    Language
                </button>
                <div class="dropdown-menu"
                     id="language-menu"
                     role="menu"
                     aria-labelledby="language-button">
                    <button class="dropdown-item" role="menuitem" onclick="alert('English selected')">English</button>
                    <button class="dropdown-item" role="menuitem" onclick="alert('Spanish selected')">Spanish</button>
                    <button class="dropdown-item" role="menuitem" onclick="alert('French selected')">French</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Company Name. All rights reserved.</p>
    </footer>
</body>
</html>
