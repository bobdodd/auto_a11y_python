<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form - Progressive Enhancement</title>
    <script type="application/json" id="test-metadata">
{
    "id": "DiscoFoundJS_002_progressive_enhancement",
    "issueId": "DiscoFoundJS",
    "expectedViolationCount": 0,
    "expectedPassCount": 3,
    "description": "JavaScript implemented with progressive enhancement",
    "wcag": "N/A",
    "impact": "N/A"
}
    </script>
    <style>
        .js-only {
            display: none;
        }
        .no-js-message {
            background: #fff3cd;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ffc107;
        }
    </style>
</head>
<body>
    <noscript>
        <div class="no-js-message">
            <strong>Notice:</strong> JavaScript is disabled. All functionality will still work, but some enhanced features may be unavailable.
        </div>
    </noscript>

    <h1>Contact Us</h1>

    <div data-expected-pass="true"
         data-pass-reason="Form has HTML5 validation and posts to server, JavaScript only adds enhanced client-side validation">
        <form id="contact-form" action="/submit-contact" method="POST">
            <label for="name">Name (required):</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email (required):</label>
            <input type="email" id="email" name="email" required>

            <label for="message">Message:</label>
            <textarea id="message" name="message"></textarea>

            <button type="submit">Send Message</button>
            <span id="validation-message" class="js-only" role="alert"></span>
        </form>
    </div>

    <div data-expected-pass="true"
         data-pass-reason="Articles are present in HTML, JavaScript only adds dynamic loading for updates">
        <h2>Recent Articles</h2>
        <div id="articles-container">
            <ul>
                <li><a href="/article1">Understanding Accessibility</a></li>
                <li><a href="/article2">Progressive Enhancement</a></li>
            </ul>
        </div>
        <button id="load-more" class="js-only">Load More Articles</button>
    </div>

    <div data-expected-pass="true"
         data-pass-reason="Default styling is accessible, JavaScript toggle only adds user preference enhancement">
        <button id="theme-toggle" class="js-only">Toggle Dark Mode</button>
    </div>

    <script>
        // Show JS-only elements
        document.querySelectorAll('.js-only').forEach(el => {
            el.style.display = 'block';
        });

        // Enhanced form validation (form still works without JS)
        document.getElementById('contact-form').addEventListener('submit', (e) => {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const validationMsg = document.getElementById('validation-message');

            if (!name || !email) {
                e.preventDefault();
                validationMsg.textContent = 'Please fill in all required fields';
                validationMsg.style.color = 'red';
                return;
            }

            // Form will submit normally to server
        });

        // Dynamic content loading (content already present in HTML)
        document.getElementById('load-more').addEventListener('click', () => {
            alert('Loading more articles... (enhanced feature)');
        });

        // Theme toggle (progressive enhancement)
        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme',
                document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        });

        // Apply saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
        }
    </script>
</body>
</html>
